
<table class="table table-bordered">
    <tr>
        <th>Application No.</th>
        <td>{{customerData.id}}</td>
    </tr>

    <tr>
        <th>First Name</th>
        <td>{{customerData.customerinfo.firstName}}</td>

        <th>Middle Name</th>
        <td>{{customerData.customerinfo.middleName}}</td>

        <th>Last Name</th>
        <td>{{customerData.customerinfo.lastName}}</td>
    </tr>

    <tr>
        <th>Age</th>
        <td>{{customerData.customerinfo.age}}</td>
    </tr>

    <tr>
        <th>Gender</th>
        <td>{{customerData.customerinfo.gender}}</td>
    </tr>

    <tr>

        <th>Date Of Birth</th>
        <td>{{customerData.customerinfo.dob}}</td>
    </tr>

    <tr>
        <th>Mobile No.</th>
        <td>{{customerData.customerinfo.mobileNo}}</td>

        <th>E-mail Id</th>
        <td>{{customerData.customerinfo.email}}</td>
    </tr>

    <tr>
        <th>Aadhar No.</th>
        <td>{{customerData.customerinfo.aadhar}}</td>

        <th>Pancard No.</th>
        <td>{{customerData.customerinfo.pancard}}</td>
    </tr>

    <tr>
        <th style="color: blue;">Total Loan Required</th>
        <td style="color: blue;">{{customerData.customerinfo.totalloanrequired}}</td>
    </tr>

</table>

<div class="emicalculator">
    <div class="emicalcform">

        <form class="" [formGroup]="emiCalculatorForm" (ngSubmit)="calculateEmi()">

            <!-- First Data -->
            <label for="loanAmount">Home Loan Amount:</label>
            <input type="text" (change)="calculateEmi()" id="loanAmount"  class="form-control w-50 mt-2 ms-2" placeholder="Loan amount"
                formControlName="loanAmount">

            <input class="form-control-range range ms-2 mt-3" type="range" formControlName="loanAmount"
                id="loanAmountRange" min="0" (change)="calculateEmi()" max="50000000" step="100000" [(ngModel)]="loanAmountValue"
                (input)="updateLoanAmount()" /> <br>

            <!-- Second Data -->
            <label for="interestRate" class="mt-3">Interest Rate (Per Annum):</label>
            <input type="text" (change)="calculateEmi()" id="interestRate" class="form-control w-50 mt-2 ms-2" placeholder="Interest Rate"
                formControlName="interestRate">

            <input class="form-control-range range ms-2 mt-3" type="range" formControlName="interestRate"
                id="interestValue" min="0" (change)="calculateEmi()" max="20" step="0.1" [(ngModel)]="interestValue"
                (input)="updateInterestRate()" /> <br>

            <!-- Third Data row -->

            <label for="loanTenure" class="mt-3">Loan Tenure(In Months)</label>

            <input type="text" (change)="calculateEmi()" id="loanTenure" class="form-control w-50 mt-2 ms-2" placeholder="Loan amount"
                formControlName="loanTenure">

            <input class="form-control-range range ms-2 mt-3" type="range" formControlName="loanTenure"
                id="loanAmountRange" min="0" (change)="calculateEmi()" max="500" step="1" [(ngModel)]="loanTenureValue"
                (input)="updateLoanTenure()" />
            <br>

            <button class="btn btn-success ms-2 mt-4">Calculate</button>
        </form>

    </div>

    <div class="calcresult">

        <div class="formresult">

            <pre>
Total Interest Payable: {{totalInterest | currency:'INR'}}

Total Payment:            {{totalAmount | currency:'INR'}}

Loan Emi:                   {{emi  | currency:'INR'}}
            </pre>

        </div>

        <div class="pieresult">
            <!-- <hr> --> <br>
            <div style="height: 200px; width: 100%;">
                <canvas id="canvas"></canvas>
            </div>
        </div>

    </div>
</div>


<!-- sanction letter -->
<div #content>
    <div class="container">
        <h3 class="text-start ">Sanction Letter</h3>
        <p>Date {{sanctionedDate | date:'dd/MM/yy'}}</p>
        <p>Dear, {{customerData.customerinfo.lastName}} {{customerData.customerinfo.firstName}} {{customerData.customerinfo.middleName}}
        </p>
        <p>Thank you for choosing Secure Haven Bank. Based on the application and information provided therein, we are
            pleased to
            extend an offer to you for a loan as per the preliminary terms and conditions mentioned below:</p>
        <table class="table table-bordered border-dark" style="width: 60%;">
            <tr>
                <th>Application No </th>
                <td>{{customerData.id}}</td>
            </tr>
            <tr>
                <th>Sanctioned Date </th>
                <td>{{sanctionedDate | date:'dd/MM/yy'}}</td>
            </tr>
            <tr>
                <th>Applicant Name </th>
                <td>{{customerData.customerinfo.firstName}} {{customerData.customerinfo.middleName}}
                    {{customerData.customerinfo.lastName}}</td>
            </tr>
            <tr>
                <th>Mobile No </th>
                <td>{{customerData.customerinfo.mobileNo}}</td>
            </tr>
        </table>
        <br>
        <table class="table table-bordered border-dark" style="width: 80%;">
            <tr>
                <th>Loan Type</th>
                <td>Home Loan</td>
            </tr>
            <tr>
                <th>Loan Amount Sanctioned: </th>
                <td>{{sanctionedAmount}}</td>
            </tr>
            <tr>
                <th>Reference Interest Rate:</th>
                <td>{{interestValue}}% per annum (Interest Type: Floating rate of interest | Periodicity of Interest
                    Application: Monthly)</td>
            </tr>
            <tr>
                <th>Floating Interest Rate:</th>
                <td>Reference rate applicable at the time of disbursement - 4.90% per annum</td>
            </tr>
            <tr>
                <th>Loan Tenure (In months):</th>
                <td>{{loanTenureValue}}</td>
            </tr>
            <tr>
                <th>Total Processing Charges:</th>
                <td>Up to 0.5% of the total loan amount</td>
            </tr>
            <tr>
                <th>Origination Fee (inclusive of GST):</th>
                <td>2,500</td>
            </tr>
            <tr>
                <th>Sanction Letter Validity:</th>
                <td>Up to 0.5% of the total loan amount</td>
            </tr>
            <tr>
                <th>Amount of EMI (INR):</th>
                <td>{{totalAmount | currency:'INR'}}</td>
            </tr>
            <tr>
                <th>Property Address:</th>
                <td>{{customerData.customerpropertydetails.propertyAddress}}</td>
            </tr>
            
        </table>
       <p>Additional conditions to comply prior to loan disbursal: <br>
                
            1. Repayment from ABC Bank <br>
            2. Legal vetting and search to be conducted <br>
            3. NOC and offered collateral <br>
            4. Confirmation form, official ID and copy of ID <br>
        </p>
    </div>
</div>

<br>

<button (click)="generatePDF()" class="btn btn-warning">Download</button>

<!-- <div class="alert alert-success" role="alert" *ngIf="verifyDocxMessage">
    {{verifyDocxMessage}} 
    <button class="btn btn-primary ms-4" (click)="forwardtoCM()">Forward to Credit Manager <i [hidden]="hide" class="fa fa-check" aria-hidden="true"></i></button>
  </div>

<button class="btn btn-success" (click)="checkCibil()">Check Cibil Score</button>
<button class="btn btn-success ms-5" (click)="verifyDocuments()">Verify Documents</button> -->
